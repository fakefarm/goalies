(function(){this.app=angular.module("goals"),this.app.controller("goalController",["$scope","goalModel","$routeParams","taskModel",function(n,t,e,o){var r,u,a;r=function(){return t.index().then(function(t){return n.goals=t.data,a()})},u=function(){},o.index().then(function(t){var o;return o=t.data,n.tasks=_.filter(o,function(n){return n.goal_id===parseInt(e.id,10)?n:void 0})}),a=function(){return n.goal=_.find(n.goals,function(n){return n.id===parseInt(e.id,10)})},n["new"]=function(e){return e.id=e.id,t.postGoal(e).then(function(){return n.goals.push(e),n.goal=""})},n.complete=function(n){return n.completed=!0,t.update(n)},n.update=function(n){return t.update(n)},n.destroy=function(n){return t.destroy(n).then(function(){return n["delete"]=!0})},r(),u()}])}).call(this);