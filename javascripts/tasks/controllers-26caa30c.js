(function(){this.app=angular.module("tasks"),this.app.controller("taskController",["$scope","taskModel","goalModel",function(t,n,e){var o,r,u,s,a;return e.index().then(function(n){var e;return t.goals=n.data,e={},_.each(t.goals,function(t){return e[t.id]=t.name}),t.align=function(t){return t.goal_id?e[t.goal_id]:"what goal?"}}),r=function(){return n.index().then(function(n){var e;return e=n.data,t.tasks=_.filter(e,function(t){return t.completed===!1&&moment(t.snooze)<moment()?t:void 0})})},o=function(){return n.index().then(function(n){var e;return e=n.data,t.completedTasks=_.filter(e,function(t){return t.completed===!0?t:void 0})})},a=function(){return n.index().then(function(n){var e;return e=n.data,t.snoozedTasks=_.filter(e,function(t){return t.completed===!1&&moment(t.snooze)>moment()?t:void 0})})},t["new"]=function(e){return e.snooze=moment(),t.tasks.push(e),t["new"].task={},n.postTask(e)},t.update=function(t){return n.update(t)},u=function(t,n){var e;return e="",_.each(t,function(o){return o.id===n.id?e=t.indexOf(n):void 0}),t.splice(e,1)},s=function(t,n){return t.push(n)},t.snooze=function(e){return e.snooze=moment(e.snooze).add(3,"days"),n.update(e),u(t.tasks,e),s(t.snoozedTasks,e)},t["return"]=function(e){return e.snooze=moment(),n.update(e),u(t.snoozedTasks,e),s(t.tasks,e)},t.undo=function(e){return e.completed=!1,n.update(e),u(t.completedTasks,e),s(t.tasks,e)},t.complete=function(e){return e.completed=!0,n.update(e),u(t.tasks,e),s(t.completedTasks,e)},t.destroy=function(t){return n.destroy(t).then(function(){return t["delete"]=!0})},r(),o(),a()}]),this.app.controller("TaskSidebarController",["$scope",function(t){return t.openSidebar=!0,t.toggle=!1,t.completed={status:!1},t.snooze={status:!0},t.showCompleted=function(){return t.completed.status=!0,t.snooze.status=!1},t.showSnoozed=function(){return t.snooze.status=!0,t.completed.status=!1},t.toggleDrawer=function(){return t.toggle=!t.toggle}}])}).call(this);